(ns aoc-2021.day-18-test
  (:require [clojure.test :refer :all]
            [aoc-2021.day-18 :refer :all]))

(deftest unit-test-day-18
  (testing "unit tests day 18"
    (testing "part 1"
      (testing "sf-explode"
        (is (=
             [true [[[[0,9],2],3],4]]
             (sf-explode [[[[[9,8],1],2],3],4])
             ))
        (is (=
             [true [7,[6,[5,[7,0]]]]]
             (sf-explode [7,[6,[5,[4,[3,2]]]]])
             ))
        (is (=
             [true [[6,[5,[7,0]]],3]]
             (sf-explode [[6,[5,[4,[3,2]]]],1])
             ))
        (is (=
             [true [[3,[2,[8,0]]],[9,[5,[4,[3,2]]]]]]
             (sf-explode [[3,[2,[1,[7,3]]]],[6,[5,[4,[3,2]]]]])
             ))
        (is (=
             [true [[3,[2,[8,0]]],[9,[5,[7,0]]]]]
             (sf-explode [[3,[2,[8,0]]],[9,[5,[4,[3,2]]]]])
             ))

        (is (= [true [[[[4,0],[5,0]],[[[4,5],[2,6]],[9,5]]]
                      [7,[[[3,7],[4,3]],[[6,3],[8,8]]]]]]
               (sf-explode [[[[0,[4,5]],[0,0]],[[[4,5],[2,6]],[9,5]]]
                            [7,[[[3,7],[4,3]],[[6,3],[8,8]]]]])))
        (is (= [true
                [[[[4 0] [5 4]] [[0 [7 6]] [9 5]]]
                 [7 [[[3 7] [4 3]] [[6 3] [8 8]]]]]]
               (sf-explode
                [[[[4 0] [5 0]] [[[4 5] [2 6]] [9 5]]]
                 [7 [[[3 7] [4 3]] [[6 3] [8 8]]]]])))

        (is (= [false 9]
               (sf-explode 9)))
        (is (= [false [[1 2] [3 [4 5]]]]
               (sf-explode [[1 2] [3 [4 5]]])))
        )

      (testing "sf-split"
        (is (= [true [5 5]] (sf-split 10)))
        (is (= [true [5 6]] (sf-split 11)))
        (is (= [true [6 6]] (sf-split 12)))

        (is (= [true [[7 8] 0]]
               (sf-split [15 0])))
        (is (= [true [[[[0,7],4],[[7,8],[0,13]]],[1,1]]]
               (sf-split [[[[0 7] 4] [15 [0 13]]] [1 1]])))

        (is (= [false 9] (sf-split 9)))
        (is (= [false [9 7]] (sf-split [9 7])))
        )

      (testing "sf-add"
        (is (= [[[[0,7],4],[[7,8],[6,0]]],[8,1]]
               (sf-add [[[[4,3],4],4],[7,[[8,4],9]]] [1,1])))

        (is (= [[[[4,0],[5,4]],[[7,7],[6,0]]],[[8,[7,7]],[[7,9],[5,0]]]]
               (sf-add [[[0,[4,5]],[0,0]],[[[4,5],[2,6]],[9,5]]]
                       [7,[[[3,7],[4,3]],[[6,3],[8,8]]]])))
        )

      (testing "sf-add-all"
        (is (= [[[[1,1],[2,2]],[3,3]],[4,4]]
               (sf-add-all [[1,1] [2,2] [3,3] [4,4]])))
        (is (= [[[[3,0],[5,3]],[4,4]],[5,5]]
               (sf-add-all [[1,1] [2,2] [3,3] [4,4] [5,5]])))
        (is (= [[[[5,0],[7,4]],[5,5]],[6,6]]
               (sf-add-all [[1,1] [2,2] [3,3] [4,4] [5,5] [6,6]])))

        (is (= [[[[8,7],[7,7]],[[8,6],[7,7]]],[[[0,7],[6,6]],[8,7]]]
               (sf-add-all [
                            [[[0,[4,5]],[0,0]],[[[4,5],[2,6]],[9,5]]]
                            [7,[[[3,7],[4,3]],[[6,3],[8,8]]]]
                            [[2,[[0,8],[3,4]]],[[[6,7],1],[7,[1,6]]]]
                            [[[[2,4],7],[6,[0,5]]],[[[6,8],[2,8]],[[2,1],[4,5]]]]
                            [7,[5,[[3,8],[1,4]]]]
                            [[2,[2,2]],[8,[8,1]]]
                            [2,9]
                            [1,[[[9,3],9],[[9,0],[0,7]]]]
                            [[[5,[7,4]],7],1]
                            [[[[4,2],2],6],[8,7]]
                            ])))
        )
      )

    (testing "part 2"
      )
    ))

(deftest day-18
  (testing "day 18"
    (testing "part 1"
      )

    (testing "part 2"
      )
    ))
